<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>贸易提单RWA系统 - 登录</title>
  <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="common.css">
  <style>
    /* 仅保留验证码倒计时样式，其他样式复用原有common.css */
    .code-btn.disabled {
      background: #ccc !important;
      cursor: not-allowed;
    }
  </style>
</head>
<body style="background-color: #f5f7fa;">
  <div class="login-container">
    <div class="login-card">
      <div class="login-header">
        <div class="logo">
          <i class="fa-solid fa-ship"></i>
          <span>贸易提单RWA系统</span>
        </div>
        <div class="login-tabs">
          <div class="tab-item active" data-tab="login">账号登录</div>
          <div class="tab-item" data-tab="register">注册账号</div>
        </div>
      </div>

      <!-- 登录表单（保留原有结构） -->
      <div class="login-form login-form-active" id="login-form">
        <div class="form-group">
          <label class="form-label">
            <i class="fa-solid fa-user"></i>
            <input type="text" placeholder="请输入手机号/用户名" id="login-account">
          </label>
        </div>
        <div class="form-group">
          <label class="form-label">
            <i class="fa-solid fa-lock"></i>
            <input type="password" placeholder="请输入密码" id="login-pwd">
          </label>
        </div>
        <div class="form-group form-flex">
          <label class="form-label code-label">
            <i class="fa-solid fa-code"></i>
            <input type="text" placeholder="请输入验证码" id="login-code">
          </label>
          <button class="code-btn" id="send-login-code">发送验证码</button>
        </div>
        <div class="form-group form-checkbox">
          <input type="checkbox" id="remember-me">
          <label for="remember-me">记住我</label>
          <a href="#" class="forget-pwd">忘记密码？</a>
        </div>
        <button class="login-btn" id="login-btn">登录系统</button>
        <!-- 移除：其他登录方式模块 -->
      </div>

      <!-- 注册表单（保留原有结构，仅手机号注册） -->
      <div class="login-form" id="register-form">
        <div class="form-group">
          <label class="form-label">
            <i class="fa-solid fa-mobile-screen-button"></i>
            <input type="text" placeholder="请输入手机号" id="reg-phone">
          </label>
        </div>
        <div class="form-group form-flex">
          <label class="form-label code-label">
            <i class="fa-solid fa-code"></i>
            <input type="text" placeholder="请输入验证码" id="reg-code">
          </label>
          <button class="code-btn" id="send-reg-code">发送验证码</button>
        </div>
        <div class="form-group">
          <label class="form-label">
            <i class="fa-solid fa-lock"></i>
            <input type="password" placeholder="请设置密码（6-16位）" id="reg-pwd">
          </label>
        </div>
        <div class="form-group">
          <label class="form-label">
            <i class="fa-solid fa-lock"></i>
            <input type="password" placeholder="请确认密码" id="reg-repwd">
          </label>
        </div>
        <div class="form-group form-checkbox">
          <input type="checkbox" id="agree-protocol">
          <label for="agree-protocol">同意《用户协议》和《隐私政策》</label>
        </div>
        <button class="login-btn" id="reg-btn">注册账号</button>
      </div>
    </div>
  </div>

  <script>
    // 1. 登录/注册标签切换（保留原有逻辑）
    const tabItems = document.querySelectorAll('.tab-item');
    const loginForm = document.getElementById('login-form');
    const registerForm = document.getElementById('register-form');

    tabItems.forEach(tab => {
      tab.addEventListener('click', () => {
        tabItems.forEach(item => item.classList.remove('active'));
        tab.classList.add('active');
        
        if (tab.dataset.tab === 'login') {
          loginForm.classList.add('login-form-active');
          registerForm.classList.remove('login-form-active');
        } else {
          loginForm.classList.remove('login-form-active');
          registerForm.classList.add('login-form-active');
        }
      });
    });

    // 2. 验证码倒计时通用函数
    function startCountdown(btn, seconds = 60) {
      let count = seconds;
      btn.disabled = true;
      btn.classList.add('disabled');
      btn.textContent = `重新发送(${count}s)`;
      
      const timer = setInterval(() => {
        count--;
        btn.textContent = `重新发送(${count}s)`;
        if (count <= 0) {
          clearInterval(timer);
          btn.disabled = false;
          btn.classList.remove('disabled');
          btn.textContent = '发送验证码';
        }
      }, 1000);
    }

    // 3. 登录页发送验证码（保留原有逻辑）
    const sendLoginCodeBtn = document.getElementById('send-login-code');
    sendLoginCodeBtn.addEventListener('click', () => {
      const account = document.getElementById('login-account').value.trim();
      if (!account) {
        alert('请先输入手机号/用户名！');
        return;
      }
      alert(`已向${account}发送验证码，验证码：123456`);
      startCountdown(sendLoginCodeBtn);
    });

    // 4. 注册页发送验证码（保留原有逻辑）
    const sendRegCodeBtn = document.getElementById('send-reg-code');
    sendRegCodeBtn.addEventListener('click', () => {
      const phone = document.getElementById('reg-phone').value.trim();
      if (!/^1[3-9]\d{9}$/.test(phone)) {
        alert('请输入正确的手机号！');
        return;
      }
      alert(`已向${phone}发送验证码，验证码：654321`);
      startCountdown(sendRegCodeBtn);
    });

    // 5. 登录按钮点击（保留原有逻辑）
    const loginBtn = document.getElementById('login-btn');
    loginBtn.addEventListener('click', () => {
      const account = document.getElementById('login-account').value.trim();
      const pwd = document.getElementById('login-pwd').value.trim();
      const code = document.getElementById('login-code').value.trim();

      if (!account || !pwd || !code) {
        alert('请填写完整登录信息！');
        return;
      }
      // 【关键修改：跳转到个人中心】
    alert('登录成功！即将进入个人中心');
    window.location.href = 'personal.html'; 
   });
    

    // 6. 注册按钮点击（保留原有逻辑）
    const regBtn = document.getElementById('reg-btn');
    regBtn.addEventListener('click', () => {
      const phone = document.getElementById('reg-phone').value.trim();
      const code = document.getElementById('reg-code').value.trim();
      const pwd = document.getElementById('reg-pwd').value.trim();
      const repwd = document.getElementById('reg-repwd').value.trim();
      const agree = document.getElementById('agree-protocol').checked;

      if (!phone || !code || !pwd || !repwd) {
        alert('请填写完整注册信息！');
        return;
      }
      if (!/^1[3-9]\d{9}$/.test(phone)) {
        alert('请输入正确的手机号！');
        return;
      }
      if (pwd.length < 6 || pwd.length > 16) {
        alert('密码长度需在6-16位之间！');
        return;
      }
      if (pwd !== repwd) {
        alert('两次输入的密码不一致！');
        return;
      }
      if (!agree) {
        alert('请同意《用户协议》和《隐私政策》！');
        return;
      }
      alert('注册成功！即将跳转到登录页');
      tabItems[0].click();
    });
  </script>
</body>
</html>